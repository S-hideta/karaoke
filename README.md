# カラオケ練習アプリ

## 概要

このアプリケーションは、カラオケの練習を支援するWebアプリケーションです。楽曲検索、歌詞の自動同期、録音機能、練習セッションの保存などの機能を提供します。

## 主要機能

### 🎵 楽曲検索
- **リアルタイム検索**: 曲名やアーティスト名で楽曲を検索
- **複数ソース**: YouTube、iTunes、サンプルデータから検索
- **あいまい検索**: 完全一致しない場合でも類似楽曲を提案
- **検索結果ハイライト**: 検索語句をハイライト表示

### 🎤 歌詞機能
- **自動歌詞取得**: 選択した楽曲の歌詞を自動取得
- **タイミング同期**: 音源と歌詞の手動同期機能
- **フレーズ再生**: 歌詞行をタップして特定部分を再生（1秒前から開始）
- **リアルタイムハイライト**: 再生中の歌詞をハイライト表示

### 🎬 音源再生
- **YouTube統合**: YouTube動画の埋め込み再生
- **iTunes プレビュー**: iTunes の30秒プレビュー再生
- **ファイルアップロード**: ローカル音源ファイルのアップロード対応

### 🎙️ 録音機能
- **高品質録音**: 改良された録音機能
- **視覚的フィードバック**: 録音中のマイクアイコン点滅
- **複数コーデック対応**: WebM、MP4などの対応

### 💾 セッション管理
- **練習データ保存**: 楽曲、歌詞、タイミング情報の保存
- **セッション読み込み**: 保存されたセッションの継続練習
- **ローカルストレージ**: ブラウザ内でのデータ保存

## API設定

### 必要なAPIキー

#### YouTube Data API v3
- **用途**: 楽曲検索
- **取得先**: [Google Cloud Console](https://console.developers.google.com)
- **無料枠**: 10,000リクエスト/日

#### Musixmatch API
- **用途**: 歌詞検索
- **取得先**: [Musixmatch Developer](https://developer.musixmatch.com)
- **無料枠**: 2,000リクエスト/日

### 設定方法

1. `config.js` ファイルを開く
2. 以下の行を編集：
   ```javascript
   YOUTUBE_API_KEY: 'YOUR_YOUTUBE_API_KEY_HERE',
   MUSIXMATCH_API_KEY: 'YOUR_MUSIXMATCH_API_KEY_HERE',
   ```

### デモモード

APIキーが未設定の場合、サンプルデータを使用したデモモードで動作します。

## 使用方法

### 1. 楽曲検索
1. 検索ボックスに曲名やアーティスト名を入力
2. 検索結果から楽曲を選択
3. 自動的に歌詞が読み込まれます

### 2. 歌詞同期
1. 楽曲を選択後、「歌詞同期」ボタンをクリック
2. 各歌詞行の歌い始めまで音源を進める
3. 準備完了後、OKボタンをクリック
4. 全ての歌詞行で繰り返し

### 3. フレーズ練習
1. 同期済みの歌詞行をクリック
2. 該当フレーズが1秒前から再生開始
3. 次の歌詞行まで、または8秒間再生

### 4. 録音練習
1. 「録音開始」ボタンをクリック
2. マイクアイコンが点滅し、録音開始
3. 「録音停止」ボタンで録音終了
4. 「録音再生」ボタンで確認

### 5. セッション保存
1. 楽曲と歌詞を設定
2. 「セッション保存」ボタンをクリック
3. セッション名を入力して保存

## 技術仕様

### 対応ブラウザ
- Chrome 70+
- Firefox 65+
- Safari 12+
- Edge 79+

### 必要な権限
- マイクアクセス（録音機能）
- ローカルストレージ（セッション保存）

### 外部依存
- YouTube IFrame API
- Web Audio API
- MediaRecorder API

## デプロイメント

### Renderでのデプロイ
1. GitHubリポジトリにプッシュ
2. Renderで「Static Site」を選択
3. 自動的に `render.yaml` の設定が適用

### 環境変数（推奨）
本番環境では、APIキーを環境変数で管理してください：
```bash
YOUTUBE_API_KEY=your_youtube_api_key
MUSIXMATCH_API_KEY=your_musixmatch_api_key
```

## 注意事項

### 著作権について
- 楽曲と歌詞の著作権は各権利者に帰属します
- 私的利用の範囲内でご使用ください
- 商用利用前に適切な許可を取得してください

### APIの制限
- YouTube API: 1日10,000リクエスト
- Musixmatch API: 1日2,000リクエスト
- 制限を超えた場合、サンプルデータが表示されます

## ライセンス

MIT License

## 貢献

プルリクエストやイシューの報告を歓迎します。

## サポート

質問やバグ報告は、GitHubのIssuesページからお願いします。