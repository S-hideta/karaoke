<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>カラオケ練習アプリ</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>カラオケ練習アプリ</h1>
        </header>
        
        <main>
            
            <div class="search-section">
                <h3>楽曲選択</h3>
                
                <!-- YouTube URL Input (Primary) -->
                <div class="url-input-section">
                    <h4>🎬 YouTube URL直接入力（推奨）</h4>
                    <div class="url-controls">
                        <input type="url" id="youtube-url" placeholder="YouTubeのURLをここに貼り付けてください（例: https://www.youtube.com/watch?v=...)">
                        <button id="load-url-btn">読み込み</button>
                    </div>
                    <div class="url-help">
                        <small>💡 YouTubeで楽曲を見つけて、URLをコピー＆ペーストするのが最も確実です</small>
                        <details style="margin-top: 10px;">
                            <summary style="cursor: pointer; color: #3498db;">📖 使い方の詳細</summary>
                            <div style="margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; font-size: 13px;">
                                <strong>手順：</strong><br>
                                1. YouTubeで練習したい楽曲を検索<br>
                                2. 動画ページのURLをコピー<br>
                                3. 上の入力欄にペースト（自動で読み込み開始）<br>
                                4. 歌詞を手動入力または検索で取得<br>
                                <br>
                                <strong>対応URL形式：</strong><br>
                                • https://www.youtube.com/watch?v=...<br>
                                • https://youtu.be/...<br>
                                • https://m.youtube.com/watch?v=...<br>
                            </div>
                        </details>
                    </div>
                </div>
                
                <!-- Search (Secondary) -->
                <div class="search-controls-section">
                    <h4>🔍 楽曲検索（補助的）</h4>
                    <div class="search-controls">
                        <input type="text" id="song-search" placeholder="曲名またはアーティスト名で検索">
                        <button id="search-btn">検索</button>
                    </div>
                </div>
                
                <div id="search-results"></div>
            </div>
            
            <div class="audio-section">
                <div class="song-info">
                    <h2 id="song-title">楽曲を選択してください</h2>
                </div>
                
                <div class="audio-controls">
                    <input type="file" id="audio-file" accept="audio/*">
                    <button id="play-btn" disabled>再生</button>
                    <button id="pause-btn" disabled>一時停止</button>
                    <button id="stop-btn" disabled>停止</button>
                </div>
                
                <div class="progress-bar">
                    <div id="progress" class="progress-fill"></div>
                </div>
                
                <div class="time-display">
                    <span id="current-time">0:00</span>
                    <span id="total-time">0:00</span>
                </div>
            </div>
            
            <div class="lyrics-section">
                <h3>歌詞</h3>
                <div id="lyrics-container">
                    <div class="lyrics-input-section">
                        <textarea id="lyrics-input" placeholder="歌詞を入力してください（1行ずつ改行で区切って入力）"></textarea>
                        <div class="lyrics-controls">
                            <button id="set-lyrics-btn">歌詞をセット</button>
                            <button id="sync-lyrics-btn" disabled>歌詞同期</button>
                        </div>
                    </div>
                    <div id="lyrics-display"></div>
                </div>
            </div>
            
            <div class="session-section">
                <h3>セッション管理</h3>
                <div class="session-controls">
                    <button id="save-session-btn" disabled>セッション保存</button>
                    <select id="session-select">
                        <option value="">保存されたセッションを選択</option>
                    </select>
                    <button id="load-session-btn" disabled>セッション読み込み</button>
                </div>
            </div>
            
            <div class="practice-section">
                <h3>練習モード</h3>
                <div class="practice-controls">
                    <button id="start-practice-btn" disabled>練習開始</button>
                    <button id="stop-practice-btn" disabled>練習停止</button>
                </div>
                
                <div class="practice-status">
                    <p id="practice-status-text">楽曲と歌詞を準備してください</p>
                </div>
            </div>
            
            <div class="recording-section">
                <h3>録音</h3>
                <div class="recording-controls">
                    <button id="record-btn">
                        <span class="mic-icon">🎤</span>
                        録音開始
                    </button>
                    <button id="stop-record-btn" disabled>
                        <span class="stop-icon">⏹️</span>
                        録音停止
                    </button>
                    <button id="play-record-btn" disabled>
                        <span class="play-icon">▶️</span>
                        録音再生
                    </button>
                </div>
                
                <div class="recording-status">
                    <p id="recording-status-text">録音準備完了</p>
                </div>
            </div>
        </main>
    </div>
    
    <audio id="audio-player" preload="auto"></audio>
    <div id="youtube-player"></div>
    
    <!-- Configuration -->
    <script src="config.js"></script>
    <!-- YouTube API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script src="script.js"></script>
</body>
</html>